<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Resell Pro — Forgot Password</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body class="rp-bg">
  <main class="rp-center">
    <section class="rp-card">
      <h1 class="rp-title">Reset your password</h1>
      <p class="rp-subtitle">Enter your User ID or Email. We’ll send reset instructions if there’s a match.</p>

      <form id="fp-form" class="rp-form">
        <label class="rp-label" for="fp-id">User ID or Email</label>
        <input id="fp-id" type="text" class="rp-input" required />
        <div id="fp-error" class="rp-error" role="alert" hidden></div>
        <div id="fp-success" class="rp-success" role="status" hidden></div>
        <button class="rp-btn" type="submit">Send Reset Link</button>
      </form>

      <div class="rp-links">
        <a href="/index.html">Back to Sign In</a>
      </div>
    </section>
  </main>

  <script src="/assets/js/app.js" defer></script>
  <script>
    (function(){
      const form = document.getElementById('fp-form');
      const idEl = document.getElementById('fp-id');
      const err = document.getElementById('fp-error');
      const ok = document.getElementById('fp-success');

      function show(el, msg){ el.textContent = msg; el.hidden = false; }
      function hide(el){ el.textContent = ''; el.hidden = true; }

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        hide(err); hide(ok);
        const ident = (idEl.value || '').trim();
        if (!ident) { show(err, 'Please enter a User ID or Email.'); return; }

        const { ok: success, data } = await RP.request(RP.routes.forgotPassword, {
          method: 'POST',
          body: { identifier: ident }
        });

        if (success) show(ok, 'If we found a match, you’ll receive an email shortly.');
        else show(err, (data && data.error) || 'Unable to process request.');
      });
    })();
  </script>
</body>
</html>
